<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Game | Progetto Fondamenti di Computer Grafica</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/cg-exam/assets/css/0.styles.585889b8.css" as="style"><link rel="preload" href="/cg-exam/assets/js/app.b4e604e7.js" as="script"><link rel="preload" href="/cg-exam/assets/js/2.83deb042.js" as="script"><link rel="preload" href="/cg-exam/assets/js/4.a5e8faa5.js" as="script"><link rel="prefetch" href="/cg-exam/assets/js/10.d77f1660.js"><link rel="prefetch" href="/cg-exam/assets/js/3.676b69f1.js"><link rel="prefetch" href="/cg-exam/assets/js/5.47a04f22.js"><link rel="prefetch" href="/cg-exam/assets/js/6.4c5be0ae.js"><link rel="prefetch" href="/cg-exam/assets/js/7.451bf10a.js"><link rel="prefetch" href="/cg-exam/assets/js/8.06b78789.js"><link rel="prefetch" href="/cg-exam/assets/js/9.97f7254b.js">
    <link rel="stylesheet" href="/cg-exam/assets/css/0.styles.585889b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cg-exam/" class="home-link router-link-active"><!----> <span class="site-name">Progetto Fondamenti di Computer Grafica</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/cg-exam/" class="sidebar-link">Introduzione</a></li><li><a href="/cg-exam/engine-core.html" class="sidebar-link">Modulo Core dell'Engine</a></li><li><a href="/cg-exam/graphics.html" class="sidebar-link">Moduli per la grafica</a></li><li><a href="/cg-exam/game.html" class="active sidebar-link">Game</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cg-exam/game.html#il-gioco" class="sidebar-link">Il Gioco</a></li><li class="sidebar-sub-header"><a href="/cg-exam/game.html#le-classi-del-modulo" class="sidebar-link">Le classi del modulo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cg-exam/game.html#car" class="sidebar-link">Car</a></li><li class="sidebar-sub-header"><a href="/cg-exam/game.html#minimap" class="sidebar-link">Minimap</a></li><li class="sidebar-sub-header"><a href="/cg-exam/game.html#menu" class="sidebar-link">Menu</a></li><li class="sidebar-sub-header"><a href="/cg-exam/game.html#staticobject" class="sidebar-link">StaticObject</a></li></ul></li></ul></li><li><a href="/cg-exam/utils.html" class="sidebar-link">Modulo di Utility</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="game"><a href="#game" aria-hidden="true" class="header-anchor">#</a> Game</h1> <h2 id="il-gioco"><a href="#il-gioco" aria-hidden="true" class="header-anchor">#</a> Il Gioco</h2> <p>Prima di parlare delle classi che compongono questo modulo è arrivato finalmente il momento di discutere del gioco vero e proprio.</p> <p><img src="/cg-exam/assets/img/game-view.901684af.png" alt="Immagine Gioco"></p> <p>Ci troviamo in questo &quot;bellissimo&quot; mondo notturno alla guida della nostra lamborghini, ed il nostro compito sarà quello di scovare fra gli alberi il cartello con la foto del ricercato (ovvero lo sviluppatore di questo software). Una volta trovato il cartello basterà passarci sopra con la vettura per vincere il gioco, e da quel momento in poi sarà possibile anche cambiare la scena da notte a giorno.</p> <p>Come possiamo vedere dall'immagine abbiamo:</p> <ul><li>In alto a sinistra l'obbiettivo da raggiungere, mentre in basso abbiamo la velocità attuale della macchina.</li> <li>In basso a destra è presente la scena vista dall'alto, possiamo quindi vederla come una piccola mappa.</li></ul> <p>I comandi di gioco sono:</p> <table><thead><tr><th>Comando</th> <th>Tasto/i</th></tr></thead> <tbody><tr><td>Bloccare il puntatore all'interno della finestra</td> <td>0</td></tr> <tr><td>Cambiare la camera</td> <td>1</td></tr> <tr><td>Cambiare fra vista solida e wireframe</td> <td>2</td></tr> <tr><td>Attivare/Disattivare tutto il testo a schermo</td> <td>3</td></tr> <tr><td>Attivare/Disattivare solamente le info e non la velocità</td> <td>P</td></tr> <tr><td>Attivare/Disattivare la notte (solo una volta vinto)</td> <td>N</td></tr> <tr><td>Attivare/Disattivare la minimappa</td> <td>M</td></tr> <tr><td>Chiudere il gioco</td> <td>ESC</td></tr> <tr><td>Muovere la camera libera</td> <td>A S D W</td></tr> <tr><td>Routare la camera libera</td> <td>movimento mouse</td></tr> <tr><td>Accendere/Spegnere le luci della macchina</td> <td>U</td></tr> <tr><td>Muovere la macchina</td> <td>J K L I</td></tr></tbody></table> <h2 id="le-classi-del-modulo"><a href="#le-classi-del-modulo" aria-hidden="true" class="header-anchor">#</a> Le classi del modulo</h2> <h3 id="car"><a href="#car" aria-hidden="true" class="header-anchor">#</a> <code>Car</code></h3> <p>Questa classe estende la classe <code>GameObject</code> e ne estende il metodo <code>Update()</code> in modo da effettuare tutti i calcoli per modificare la posizione della macchina, all'interno della scena, in base agli input dati dal giocatore (abbiamo preso spunto dal codice d'esempio visto a lezione). Dato che la macchina possiede anche delle luci anteriori all'interno della stessa funzione viene aggiornata anche la loro posizione.</p> <h3 id="minimap"><a href="#minimap" aria-hidden="true" class="header-anchor">#</a> <code>Minimap</code></h3> <p>La minimappa rappresenta il mondo di gioco visto dall'alto. Per creare questo elemento della GUI è stato scelto di renderizzare la scena in un <em>Frame Buffer</em> apposito, poi utilizzato come texture per un quad da posizionere in basso a destra.</p> <p>La funzione che permette di creare il Frame Buffer e di conseguenza la minimap è la seguente:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">bool</span> Minimap<span class="token operator">::</span><span class="token function">CreateMinimapTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">auto</span> window <span class="token operator">=</span> _game<span class="token operator">-&gt;</span><span class="token function">GetWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">auto</span> width <span class="token operator">=</span> window<span class="token operator">-&gt;</span><span class="token function">GetWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> _ratio<span class="token punctuation">;</span>
    <span class="token keyword">auto</span> height <span class="token operator">=</span> window<span class="token operator">-&gt;</span><span class="token function">GetHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> _ratio<span class="token punctuation">;</span>

    <span class="token function">glGenFramebuffers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>_framebuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">glBindFramebuffer</span><span class="token punctuation">(</span>GL_FRAMEBUFFER<span class="token punctuation">,</span> _framebuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    _texture <span class="token operator">=</span> <span class="token keyword">new</span> Graphics<span class="token operator">::</span><span class="token function">Texture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _texture<span class="token operator">-&gt;</span><span class="token function">CreateForRendering</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> GL_RGB<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">glGenRenderbuffers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>_renderbuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">glBindRenderbuffer</span><span class="token punctuation">(</span>GL_RENDERBUFFER<span class="token punctuation">,</span> _renderbuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">glRenderbufferStorage</span><span class="token punctuation">(</span>GL_RENDERBUFFER<span class="token punctuation">,</span> GL_DEPTH24_STENCIL8<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">glFramebufferRenderbuffer</span><span class="token punctuation">(</span>GL_FRAMEBUFFER<span class="token punctuation">,</span> GL_DEPTH_ATTACHMENT<span class="token punctuation">,</span>
                                GL_RENDERBUFFER<span class="token punctuation">,</span> _renderbuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">glCheckFramebufferStatus</span><span class="token punctuation">(</span>GL_FRAMEBUFFER<span class="token punctuation">)</span> <span class="token operator">!=</span> GL_FRAMEBUFFER_COMPLETE<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">glDeleteFramebuffers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>_framebuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _texture<span class="token operator">-&gt;</span><span class="token function">Unload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> _texture<span class="token punctuation">;</span>
        _texture <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="menu"><a href="#menu" aria-hidden="true" class="header-anchor">#</a> <code>Menu</code></h3> <p>La classe in questione è quella che si occupa di disegnare a schermo sia il testo con la velocità della macchina che l'obbiettivo del gioco. Quest'ultimo verrà modificato nella scritta &quot;Hai Vinto&quot; in caso di vittoria. Per disegnare testo a schermo, la classe estende l'oggetto base <code>GuiComponent</code> il quale mette a disposizione alcuni metodi per disegnare il testo su delle texture le quali verranno applicata ad un quad renderizzato sopra la scena 3D.</p> <h3 id="staticobject"><a href="#staticobject" aria-hidden="true" class="header-anchor">#</a> <code>StaticObject</code></h3> <p>Questa classe viene utilizzate per gli oggetti statici come alberi, il cartello e i lampioni. Per questo motivo si tratta di una classe quasi vuota. L'unica differenza con la classe <code>GameObject</code> dalla quale deriva è quella di passare lo shader al modello da disegnare (vedi metodo <code>Draw()</code>).</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/cg-exam/graphics.html" class="prev">
          Moduli per la grafica
        </a></span> <span class="next"><a href="/cg-exam/utils.html">
          Modulo di Utility
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/cg-exam/assets/js/app.b4e604e7.js" defer></script><script src="/cg-exam/assets/js/2.83deb042.js" defer></script><script src="/cg-exam/assets/js/4.a5e8faa5.js" defer></script>
  </body>
</html>
